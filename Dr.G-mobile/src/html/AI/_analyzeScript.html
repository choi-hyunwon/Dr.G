<script>
    $(document).ready(function () {
        /* 상단 - bar graph */
        var $percent = $('.percent');
        $percent.each(function () {
            let data = $(this).data('percent');
            $(this).css('left', data + '%')

            if (0 < data && data <= 5) {
                $(this).addClass('left-0')
            } else if (5 < data && data <= 10) {
                $(this).addClass('left-1')
            } else if (90 < data && data <= 95) {
                $(this).addClass('right-0')
            } else if (95 < data && data <= 100) {
                $(this).addClass('right-1')
            }
        })

        /* 상단 - tooltip */
        $('._tooltip').on('click',function (){
            $(this).children('.alert-tooltip').css('display','inline-block');

            setTimeout(function (){
                $('._tooltip').children('.alert-tooltip').css('display','none');
            },5000)
        })

        /* 피부고민 리스트 */
        $('.skin-type-list a').on('click',function (){
            $(this).parent().addClass('on').siblings().removeClass('on')
        })

        /* 피부 상태 그래프 */
        var $score = $('._barChart .bar .pos');
        $score.each(function () {
            let data = $(this).data('score');
            let numDate = 100 - Number(data)
            $(this).css('left', data + '%')
            $(this).siblings('.gradient').css({
                'mask-image' : 'linear-gradient(to left, transparent ' + numDate + '%, black '+ numDate +'%)',
                '-webkit-mask-image' : 'linear-gradient(to left, transparent ' + numDate + '%, black '+ numDate +'%)'
            })
            if (0 < data && data <= 5) {
                $(this).addClass('align-left')
            } else if (95 < data && data <= 100) {
                $(this).addClass('align-right')
            }
        })

        /* 추천 - tab */
        $('._tabBtn a').on('click', function () {
            let idx = $(this).index()
            let tabItem = $('._tabBtn a')
            let tabPane = $('._tabBtn').siblings('.tab-content-sm').children('.tab-pane')
            tabItem.removeClass('active')
            tabItem.eq(idx).addClass('active')
            tabPane.removeClass('active')
            tabPane.eq(idx).addClass('active')
        })

        /* 추천 - 피부 일기 선택 */
        $('.skin-diary .select-box').each(function (){
            $(this).children('.item').on('click',function (){
                $(this).addClass('on').siblings().removeClass('on')
            })
        })

        /* 별점 */
        $("._star").on('click', function () {
            var idx = $(this).index();
            $("._star").removeClass("on");
            for (var i = 0; i <= idx; i++) {
                $("._star").eq(i).addClass("on");
            }
        });

        /* 솔루션 슬라이더 팝업 */
        var swiper = new Swiper("._solutionSlider", {
            spaceBetween: 30,
            centeredSlides: true,
            pagination: {
                el: "._solutionPagination",
                clickable: true,
                renderBullet: function (index, className) {
                    return '<span class="' + className + '">' + (index + 1) + "</span>";
                },
            },
        });
    })

    /* textarea - count text */
    function countChar(val , target) {
        var len = val.value.length;
        $(`.${target}`).text(len);
    }
</script>
