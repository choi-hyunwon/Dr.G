<script>
    $(document).ready(function () {
        /*step1*/
        $('.asking .badge-box .badge').on('click', function () {
        $(this).toggleClass('active')
    })

        /*step2*/
        $('.question-box .habit li .btn').on('click', function () {
        $(this).parents('li').find('.btn').removeClass('active')
        $(this).addClass('active');
    })

        /*step3*/
        $('.terms .title').on('click', function () {
            if (!$(this).hasClass('_title')) {
                $(this).children().removeClass('ico-plus-md').addClass('ico-minus-md');
                $(this).addClass('_title');
                $(this).siblings().slideDown(200);
            } else {
                $(this).children().removeClass('ico-minus-md').addClass('ico-plus-md');
                $(this).removeClass('_title');
                $(this).siblings().slideUp(200);
            }
        })

        /*stap 공통*/
     /*   let stepScroll = 0;
        $(window).scroll(function (event) {
            if ($('.container').find('.step-heading').length == false) {
                let st = $(this).scrollTop();
                if (st >= stepScroll) {
                    // console.log("DOWN");
                    $('.step-heading').hide()

                } else {
                    // console.log("UP");
                    $('.step-heading').show().addClass('fixed')
                    if (window.pageYOffset > 60) {
                        $('.step-heading').removeClass('fixed')
                    }
                }
                //Updates scroll position
                stepScroll = st;
            }
        });*/

        /*답변 대기, 답변 완료*/
        $('.unfold-box .title').on('click', function () {
            if (!$(this).hasClass('_title')) {
                $(this).find('.icon').removeClass('ico-plus-sm').addClass('ico-minus-sm');
                $(this).addClass('_title');
                $(this).parent().addClass('_unfold');
                $(this).siblings().slideDown(200);
            } else {
                $(this).find('.icon').removeClass('ico-minus-sm').addClass('ico-plus-sm');
                $(this).removeClass('_title');
                $(this).parent().removeClass('_unfold');
                $(this).siblings().slideUp(200);
            }
        })



/*|--------------s 서브메인----------------------------|*/

        /*tab*/
        let sectionTab = $('._section-tab');
        let lastScroll = 0;

        $(window).scroll(function (){
             if($('.container').find('._sub-main').length){
                let st = $(this).scrollTop();
                //console.log(st);
                let sectionTabOffset = $('._section-tab').position ().top;
                let sectionAbout = $('.section-about').position ().top;
                let sectionAnswer = $('.section-answer').position ().top;

                if (st > lastScroll){
                    //console.log("DOWN");
                    if (window.pageYOffset >= sectionAbout) {
                        sectionTab.hide();
                    }
                }
                else {
                    //console.log("UP");
                    if (window.pageYOffset >= sectionTabOffset) {
                        sectionTab.show().addClass('fixed');
                        if (window.pageYOffset < sectionAbout) {
                            sectionTab.show().removeClass('fixed')
                        }
                    }
                }
                //Updates scroll position
                lastScroll = st;

                 if (st > sectionAnswer){
                     sectionTab.scrollLeft(90);
                 } else {
                     sectionTab.scrollLeft(0);
                 }

                 /* 탭활성화 */
                 let section = $('.section')
                 let tab = $('._section-tab .item')
                 section.each(function( index, element ) {
                    // console.log( section.eq(index));
                    if ( st > $(this).offset().top - 350){
                        tab.removeClass('active')
                        tab.eq(index).addClass('active')
                    }
                 });

             }
        });


        $('.slide-tab .item a').on('click',function (){
            let idx = $(this).parent().index()
            console.log(idx)
            let offset = $('.section').eq(idx).offset();
            let headHeight = $('.header-white').height() + $('._tab').height()

            if ($('.header-white').hasClass('header-transparent')){
                $('html, body').animate({scrollTop : offset.top - headHeight},400)
            }else {
                $('html, body').animate({scrollTop : offset.top},400)
            }
        })




        /*서브메인 process*/

        // let processItem = $('.mentoring-sub-main .slide-tab ul .item').eq(0)
        // console.log(idx)

        let processSwiper = new Swiper('.process-swiper', {
            loop:true,
            pagination: {
                el: ".process-pagination",
            },
        });
        processSwiper.on('transitionEnd', function() {
            let idx = processSwiper.realIndex + 1
            //console.log(idx);
            $('.step-box .step').removeClass('active')
            $('.step-box .step').eq(idx).addClass('active')
        });



       /* let page1Swipe = new Swiper('.page1-swiper', {
            direction: "vertical",
            loop:true,
            loopAdditionalSlides: 1, //마지막장에서 첫장 슬라이드 끊김현상 제어
            //autoplayDisableOnInteraction: false,
            autoplay: {
                delay: 1000
            },

            //touchRatio: 0,//드래그 금지
            on: {
                slideChange: function () {
                    let activeIndex = this.activeIndex;
                    let realIndex = this.slides.eq(activeIndex).attr('data-swiper-slide-index');
                    console.log(realIndex)

                    // $('.page1-swiper .swiper-slide').addClass('item-sm');
                    // $('.page1-swiper .swiper-slide').eq(realIndex).find('item').removeClass('item-sm');
                }
            }
        });*/

/*
        var carouselExample = document.querySelector('#carouselExample')
        var carousel = new bootstrap.Carousel(carouselExample, {
            interval: 2000,
            wrap: false
        })
*/



        var typingBool = false;
        var typingIdx = 0;
        var typingTxt = $(".typing-txt").text(); // 타이핑될 텍스트
        typingTxt = typingTxt.split(""); // 한글자씩 자른다.

        if (typingBool == false) {
            // 타이핑이 진행되지 않았다면
            typingBool = true;
            var tyInt = setInterval(typing, 100); // 반복동작
        }

        function typing() {
            if (typingIdx < typingTxt.length) {
                // 타이핑될 텍스트 길이만큼 반복
                $(".typing").append(typingTxt[typingIdx]);
                // 한글자씩 이어준다.
                typingIdx++;
            } else {
                //끝나면 반복종료
                clearInterval(tyInt);
            }
        }




        /*서브메인 voc*/
        $('.voc .review_box .item').on('click', function () {
            if (!$(this).hasClass('active')) {
                $(this).addClass('active').slideDown();
                $(this).siblings().removeClass('active');
            } else {
                $(this).removeClass('active');
            }
        })


        /*서브메인 faq*/
        let box = $('.faq_box')
        let item = $('.faq_box .item')
        let solution = $('.solution')
        item.on('click', function () {
          if (!$(this).hasClass('active')) {
              $(this).siblings().removeClass('active')
              $(this).siblings().find(solution).slideUp(200);
              $(this).addClass('active');
              $(this).find(solution).slideDown(200);
          } else {
              $(this).removeClass('active');
              $(this).find(solution).slideUp(200);
          }
        })
        $('body').click(function(e) { /*외부클릭시 닫힘처리*/
            if(!box.has(e.target).length){
                item.removeClass('active');
                item.find('.solution').slideUp(200);
            }
        });

/*|--------------e 서브메인----------------------------|*/
    });
</script>
