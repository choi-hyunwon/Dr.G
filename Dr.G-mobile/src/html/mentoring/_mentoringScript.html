<script src="../../js/common.js"></script>
<script>
    $(document).ready(function () {
        /*step1*/
        $('.asking .badge-box .badge').on('click', function () {
        $(this).toggleClass('active')
    })

        /*step2*/
        $('.question-box .habit li .btn').on('click', function () {
        $(this).parents('li').find('.btn').removeClass('active')
        $(this).addClass('active');
    })

        /*step3*/
        $('.terms .title').on('click', function () {
            if (!$(this).hasClass('_title')) {
                $(this).children().removeClass('ico-plus-md').addClass('ico-minus-md');
                $(this).addClass('_title');
                $(this).siblings().slideDown(200);
            } else {
                $(this).children().removeClass('ico-minus-md').addClass('ico-plus-md');
                $(this).removeClass('_title');
                $(this).siblings().slideUp(200);
            }
        })

        /*답변 대기, 답변 완료*/
        $('.unfold-box .title').on('click', function () {
            if (!$(this).hasClass('_title')) {
                $(this).find('.icon').removeClass('ico-plus-sm').addClass('ico-minus-sm');
                $(this).addClass('_title');
                $(this).parent().addClass('_unfold');
                $(this).siblings().slideDown(200);
            } else {
                $(this).find('.icon').removeClass('ico-minus-sm').addClass('ico-plus-sm');
                $(this).removeClass('_title');
                $(this).parent().removeClass('_unfold');
                $(this).siblings().slideUp(200);
            }
        })



/*|--------------s 서브메인----------------------------|*/

        /*tab*/
        let sectionTab = $('._section-tab');
        let lastScroll = 0;
        $(window).scroll(function (event){
            let st = $(this).scrollTop();
            console.log(st);
            let sectionTabOffset = $('._section-tab').position ().top;
            let sectionAbout = $('.section-about').position ().top;
            let sectionProcess = $('.section-process').position ().top;
            let sectionAnswer = $('.section-answer').position ().top;
            let sectionVoc = $('.section-voc').position ().top;
            let sectionFaq = $('.section-faq').position ().top;

            if (st > lastScroll){
                //Replace this with your function call for downward-scrolling
                //console.log("DOWN");
                if (window.pageYOffset >= sectionAbout) {
                    sectionTab.hide();
                }
            }
            else {
                //Replace this with your function call for upward-scrolling
               //console.log("UP");
                if (window.pageYOffset >= sectionTabOffset) {
                    sectionTab.show().addClass('fixed');
                    if (window.pageYOffset < sectionAbout) {
                        sectionTab.show().removeClass('fixed')
                    }
                }
            }
            //Updates scroll position
            lastScroll = st;
        });
        // /*tab*/
        // let sectionTab = $('._section-tab');
        // $(window).on("wheel", function (event){
        //     let sectionTabOffset = $('._section-tab').position ().top;
        //     let sectionAbout = $('.section-about').position ().top;
        //     let sectionProcess = $('.section-process').position ().top;
        //     let sectionAnswer = $('.section-answer').position ().top;
        //     let sectionVoc = $('.section-voc').position ().top;
        //     let sectionFaq = $('.section-faq').position ().top;
        //
        //     if (event.originalEvent.deltaY < 0) {
        //         // console.log('UP');
        //         // console.log(window.pageYOffset);
        //         if (window.pageYOffset >= sectionTabOffset){
        //             sectionTab.show().addClass('fixed');
        //             if (window.pageYOffset < sectionAbout){
        //                 sectionTab.show().removeClass('fixed')
        //             }
        //         }
        //
        //     } else {
        //         // console.log('Down');
        //         //console.log(window.scrollY);
        //         if (window.pageYOffset >= sectionAbout){
        //             sectionTab.hide();
        //         }
        //     }
        //
        // });

        $('.slide-tab .item a').on('click',function (){
            let idx = $(this).parent().index()
            console.log(idx)
            let offset = $('.section').eq(idx).offset();
            let headHeight = $('.header-white').height() + $('._tab').height()

            if ($('.header-white').hasClass('header-transparent')){
                $('html, body').animate({scrollTop : offset.top - headHeight},400)
            }else {
                $('html, body').animate({scrollTop : offset.top},400)
            }
        })


        /*서브메인 About*/
/*

        if ($('._underline').hasClass('aos-animate')) {
            $(this).find('span').addClass('underscore');

        } else {
            $(this).find('span').removeClass('underscore');
        }
*/







        /*서브메인 process*/

        // let processItem = $('.mentoring-sub-main .slide-tab ul .item').eq(0)
        // console.log(idx)

        let processSwiper = new Swiper('.process-swiper', {
            loop:true,
            pagination: {
                el: ".process-pagination",
            },
        });
        processSwiper.on('transitionEnd', function() {
            let idx = processSwiper.realIndex + 1
            console.log(idx);
            $('.step-box .step').removeClass('active')
            $('.step-box .step').eq(idx).addClass('active')
        });

            var typingBool = false;
            var typingIdx=0;

            // 타이핑될 텍스트를 가져온다
            var typingTxt = $(".typing-txt").text();

            typingTxt=typingTxt.split(""); // 한글자씩 자른다.

            if(typingBool==false){
            // 타이핑이 진행되지 않았다면
            typingBool=true;
            var tyInt = setInterval(typing,100); // 반복동작
        }

            function typing(){
            if(typingIdx<typingTxt.length){
            // 타이핑될 텍스트 길이만큼 반복
            $(".typing").append(typingTxt[typingIdx]);
            // 한글자씩 이어준다.
            typingIdx++;
        } else{
            //끝나면 반복종료
            clearInterval(tyInt);
        }
        }



        /*서브메인 voc*/

        $('.voc .review_box .item').on('click', function () {
            if (!$(this).hasClass('active')) {
                $(this).addClass('active').slideDown();
                $(this).siblings().removeClass('active');
            } else {
                $(this).removeClass('active');
            }
        })



        /*서브메인 faq*/
        let box = $('.faq_box')
        let item = $('.faq_box .item')
        let solution = $('.solution')
        item.on('click', function () {
          if (!$(this).hasClass('active')) {
              $(this).siblings().removeClass('active')
              $(this).siblings().find(solution).slideUp(200);
              $(this).addClass('active');
              $(this).find(solution).slideDown(200);
          } else {
              $(this).removeClass('active');
              $(this).find(solution).slideUp(200);
          }
        })
        $('body').click(function(e) { /*외부클릭시 닫힘처리*/
            if(!box.has(e.target).length){
                item.removeClass('active');
                item.find('.solution').slideUp(200);
            }
        });

/*|--------------e 서브메인----------------------------|*/
    });
</script>
