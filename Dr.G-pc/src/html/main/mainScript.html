<script>
    $(document).ready(function (){
        /* 하단 버튼 */
        var chatbot = $('#chatbot');
        chatbot.draggable({
            containment: 'parent',
            axis: 'y',
            drag: function () {
                var offset = $(this).offset();
                var yPos = offset.top;
                console.log('y :', yPos)
            }
        });

        chatbot.find('img').on('click',function (){
            $(this).siblings('.tip').show();
        })

        $('._chatClose').on('click',function (){
            chatbot.children('.tip').hide();
        })

        /* 배너 슬라이더 */
        var bannerSlider = new Swiper("._bannerSlider", {
            spaceBetween: 120,
            speed: 400,
            loop: true,
            autoplay: {
                delay: 5000,
            },
            // observer: true,
            // observeParents: true,
            pagination: {
                el: '._pagination',
            },
        });

        window.onresize=function(){
            bannerSlider.update();
        }

        $('.btn-play-stop').on('click',function (){
            if(!$(this).hasClass('play')){
                bannerSlider.autoplay.stop();
                $(this).addClass('play');
            } else {
                bannerSlider.autoplay.start();
                $(this).removeClass('play');
            }
        })

        /* 고객제안 슬라이더 */
        var suggestionSlider = new Swiper("._suggestionSlider", {
            slidesPerView: 5,
            spaceBetween: 120,
            centeredSlides: true,
            loop: true,
            autoplay: true,
            speed: 0,
            infinite: true,
            navigation: {
                nextEl: "._sNext",
                prevEl: "._sPrev",
            }
        });

       suggestionSlider.on('slideChangeTransitionStart', function () {
           $('.text-box').css('opacity','0');
       })

       suggestionSlider.on('slideChangeTransitionEnd', function () {
           setTimeout(function (){
               $('.text-box').css('opacity','1');
           },300)
       })

       suggestionSlider.on('slideChange', function () {
            var smileMotif = $('._smileMotif').find('path');
            var desc = $('._desc');
            var name = $('._name');
            var btn = $('._sBtn');
            var btnArrow = $('._arrow path');
            var bg = $('._suggestionBg');

            if(suggestionSlider.realIndex === 0) {
                smileMotif.css('fill','#05439')
                setTimeout(function (){
                    desc.text('흡수 빠른 프로 비타민 D 함유')
                    name.text('더모이스처 베리어.D')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#EF620A')
                btn.css('color','#ffffff')
                btnArrow.css('stroke','#ffffff')
                bg.css('background','linear-gradient(180deg, #B0D3FF 0%, rgba(176, 211, 255, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 1) {
                smileMotif.css('fill','#F15a00')
                setTimeout(function (){
                    desc.text('잡티 잡는 파워 비타민C 앰플')
                    name.text('비타슈티컬 15 플러스 앰플')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#F5E618')
                btn.css('color','#444444')
                btnArrow.css('stroke','#444444')
                bg.css('background','linear-gradient(180deg, #F8CCBF 0%, rgba(248, 204, 191, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 2) {
                smileMotif.css('fill','#008257')
                setTimeout(function (){
                    desc.text('진정 강한 병풀 바이옴 시카 수딩 크림')
                    name.text('레드 블레미쉬 시카 수딩 크림')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#FF4757')
                btn.css('color','#FFFFFF')
                btnArrow.css('stroke','#FFFFFF')
                bg.css('background','linear-gradient(180deg, #9AE3BC 0%, rgba(154, 227, 188, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 3) {
                smileMotif.css('fill','#05439')
                setTimeout(function (){
                    desc.text('흡수 빠른 프로 비타민 D 함유')
                    name.text('더모이스처 베리어.D')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#EF620A')
                btn.css('color','#FFFFFF')
                btnArrow.css('stroke','#ffffff')
                bg.css('background','linear-gradient(180deg, #B0D3FF 0%, rgba(176, 211, 255, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 4) {
                smileMotif.css('fill','#F15a00')
                setTimeout(function (){
                    desc.text('잡티 잡는 파워 비타민C 앰플')
                    name.text('비타슈티컬 15 플러스 앰플')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#F5E618')
                btn.css('color','#444444')
                btnArrow.css('stroke','#444444')
                bg.css('background','linear-gradient(180deg, #F8CCBF 0%, rgba(248, 204, 191, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 5) {
                smileMotif.css('fill','#008257')
                setTimeout(function (){
                    desc.text('진정 강한 병풀 바이옴 시카 수딩 크림')
                    name.text('레드 블레미쉬 시카 수딩 크림')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#FF4757')
                btn.css('color','#FFFFFF')
                btnArrow.css('stroke','#FFFFFF')
                bg.css('background','linear-gradient(180deg, #9AE3BC 0%, rgba(154, 227, 188, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 6) {
                smileMotif.css('fill','#05439')
                setTimeout(function (){
                    desc.text('흡수 빠른 프로 비타민 D 함유')
                    name.text('더모이스처 베리어.D')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#EF620A')
                btn.css('color','#FFFFFF')
                btnArrow.css('stroke','#ffffff')
                bg.css('background','linear-gradient(180deg, #F8CCBF 0%, rgba(248, 204, 191, 0) 74.22%)')
            } else if(suggestionSlider.realIndex === 7) {
                smileMotif.css('fill','#F15a00')
                setTimeout(function (){
                    desc.text('잡티 잡는 파워 비타민C 앰플')
                    name.text('비타슈티컬 15 플러스 앰플')
                },300)
                btn.attr('href', '${item.link}')
                btn.css('background-color','#F5E618')
                btn.css('color','#444444')
                btnArrow.css('stroke','#444444')
                bg.css('background','linear-gradient(180deg, #9AE3BC 0%, rgba(154, 227, 188, 0) 74.22%)')
            }
        });

        /* 배너 모달 */
        var modal = $('._bannerModal');
        var modalOpen = $('._bannerModalOpen');
        var modalClose = $('._bannerModalClose');

        modalOpen.on('click', function () {
            modal.removeClass('hide').addClass('show');
            $('body').addClass('scrOff')
        });

        modalClose.on('click', function () {
            modal.removeClass('show').addClass('hide');
            $('body').removeClass('scrOff')
        });

        // animation
        let iconAnalysis = document.querySelector('._analysisAni');

        let animationAnalysis = bodymovin.loadAnimation({
            container: iconAnalysis,
            renderer: 'svg',
            loop: false,
            autoplay: true,
            path: "../../img/main/type_262x257.json"
        });

        let iconMentoring = document.querySelector('._mentoringAni');

        let animationMentoring = bodymovin.loadAnimation({
            container: iconMentoring,
            renderer: 'svg',
            loop: true,
            autoplay: true,
            path: "../../img/main/skin.json"
        });

        new Waypoint({
            element: document.querySelector('._analysisSection'),
            handler: function () {
                animationAnalysis.playSegments([0,304], true);
            },
            offset: "50%"
        })

        new Waypoint({
            element: document.querySelector('._mentoringSection'),
            handler: function () {
                animationMentoring.playSegments([0,209], true);
            },
            offset: "50%"
        })
    })
</script>
